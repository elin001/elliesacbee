geometry = TRUE,
resolution = "20m") %>% shift_geometry() %>% select(GEOID, NAME, variable, estimate) %>% spread(variable, estimate) %>% mutate(difference = male_info_workers-female_info_workers)
infoworkers %>% arrange(desc(estimate))
californiainfoworkers <- get_acs(geography = "county",
variables = c(male_info_workers="B24030_081", female_info_workers="B24030_185"),
state = "California",
year = 2021,
survey = "acs1",
geometry = TRUE)
infoworkers1 <- get_acs(geography = "state",
variables = c(female_info_workers="B24030_185", male_info_workers = "B24030_081"),
year = 2021,
survey = "acs1",
geometry = TRUE,
resolution = "20m") %>% shift_geometry() %>% select(GEOID, NAME, variable, estimate) %>% spread(variable, estimate) %>% mutate(difference = male_info_workers-female_info_workers)
plot(infoworkers1["difference"])
ggplot(data = infoworkers1, aes(fill = difference)) +
geom_sf() +
scale_fill_distiller(palette = "YlGnBu", direction = 1) +
labs(title = " How many more male workers than female workers are there in the information sector?",
caption = "Data souce: 2021 1-year ACS, US Census Bureau",
fill= "Difference") +
theme_void()
library(tidyverse)
library(readxl)
outs <- read_excel("~/Desktop/elliesacbeeR/data/outs.xlsx", sheet=1)
irsouts <- read.csv("~/Desktop/elliesacbeeR/data/countyoutflow2021.csv")
irsins <- read.csv("~/Desktop/elliesacbeeR/data/countyinflow2021.csv")
state2state <- read_excel("~/Desktop/elliesacbeeR/data/2021ca (1).xlsx")
nosummaryrows <-irs %>% group_by(y2_countyname) %>% filter(y1_statefips == "6" & y2_statefips !=96 & y2_statefips !=97 & y2_statefips !=98)
nosummaryrows <-irsouts %>% group_by(y2_countyname) %>% filter(y1_statefips == "6" & y2_statefips !=96 & y2_statefips !=97 & y2_statefips !=98)
nosummaryrows %>% filter(y1_countyfips == 34 | y1_countyfips == 31 | y1_countyfips == 9 | y1_countyfips == 57)
View(irsouts)
View(nosummaryrows)
View(irsins)
irsins %>% filter(y1_statefips == "6")
irsins %>% filter(y1_state == "CA")
irsins %>% mutate(fullfips = (paste0("00", y1_countyfips)))
paste0("00", y1_countyfips)
irsins %>% filter(y1_state == "CA")
paste0("00", y1_countyfips)
irsins %>% str_pad(y1_countyfips, 3, pad = "0")
irsins %>% filter(y1_state == "CA")
irsins %>% str_pad(y1_countyfips, 3, pad = "0")
irsins %>% str_pad(y1_countyfips, 3, pad = "0")
irsins %>% str_pad(
"y1_countyfips", 3, pad = "0")
irsins %>% str_pad(y1_statefips, 2, pad = "0")
irsouts %>% str_pad(y1_statefips, 2, pad = "0")
library(tidyverse)
library(readxl)
outs <- read_excel("~/Desktop/elliesacbeeR/data/outs.xlsx", sheet=1)
irsouts <- read.csv("~/Desktop/elliesacbeeR/data/countyoutflow2021.csv")
irsins <- read.csv("~/Desktop/elliesacbeeR/data/countyinflow2021.csv")
state2state <- read_excel("~/Desktop/elliesacbeeR/data/2021ca (1).xlsx")
nosummaryrows <-irsouts %>% group_by(y2_countyname) %>% filter(y1_statefips == "6" & y2_statefips !=96 & y2_statefips !=97 & y2_statefips !=98)
nosummaryrows %>% filter(y1_countyfips == 34 | y1_countyfips == 31 | y1_countyfips == 9 | y1_countyfips == 57)
irsins %>% filter(y1_state == "CA")
irsouts %>% str_pad(y1_statefips, 2, pad = "0")
irsins <- irsins %>% str_pad(y1_statefips, 2, pad = "0")
irsins %>% formatC(y1_statefips, width = 2, format = "d", flag = "0")
fips_codes
fips_codes %>% inner_join(irsouts, fips_codes, by = "y1_countyname")
library(tidyverse)
library(readxl)
outs <- read_excel("~/Desktop/elliesacbeeR/data/outs.xlsx", sheet=1)
irsouts <- read.csv("~/Desktop/elliesacbeeR/data/countyoutflow2021.csv")
irsins <- read.csv("~/Desktop/elliesacbeeR/data/countyinflow2021.csv")
state2state <- read_excel("~/Desktop/elliesacbeeR/data/2021ca (1).xlsx")
nosummaryrows <-irsouts %>% group_by(y2_countyname) %>% filter(y1_statefips == "6" & y2_statefips !=96 & y2_statefips !=97 & y2_statefips !=98)
nosummaryrows <-irsouts %>% group_by(y2_countyname) %>% filter(y1_statefips == "6" & y2_statefips !=96 & y2_statefips !=97 & y2_statefips !=98)
nosummaryrows %>% filter(y1_countyfips == 34 | y1_countyfips == 31 | y1_countyfips == 9 | y1_countyfips == 57)
irsins %>% filter(y1_state == "CA")
irsins <- irsins %>% str_pad(y1_statefips, 2, pad = "0")
irsins %>% formatC(y1_statefips, width = 2, format = "d", flag = "0")
fips_codes %>% inner_join(irsouts, fips_codes, by = "y1_countyname")
fips_codes %>% inner_join(irsouts, fips_codes, by = "y1_countyname")
fips_codes
library(tigris)
fips_codes
fips_codes %>% inner_join(irsouts, fips_codes, by = "y1_countyname")
fips_codes %>% inner_join(irsouts, fips_codes, by.x = "y1_countyname")
fips_codes %>% inner_join(irsouts, fips_codes, by
= "y1_countyname")
fips_codes %>% inner_join(irsins, fips_codes, by
= "y1_countyname")
fips_codes %>% inner_join(irsins, fips_codes, by
= "y1_countynames")
fips_codes %>% inner_join(irsins, fips_codes, by
= "y1_countyname")
newtable <- merge(irsins, fips_codes, by = "y1_countyname")
newtable <- merge(irsins, fips_codes, by.x = "y1_countyname")
newtable <- merge(irsins, fips_codes, by = "y1_countyname")
fips_codes
fips <- fips_codes
View(fips)
irsins %>% formatC(y1_statefips, width = 2, format = "d", flag = "0")
latlongs <- read_csv("https://gist.github.com/russellsamora/12be4f9f574e92413ea3f92ce1bc58e6/raw/3f18230058afd7431a5d394dab7eeb0aafd29d81/us_county_latlng.csv")
View(latlongs)
View(fips)
is.numeric(irsins)
View(irsins)
is.numeric(irsins, "y1_countyfips")
is.numeric("y1_countyfips")
as.numeric("y1_countyfips")
is.numeric("y1_countyfips")
as.numeric("y1_countyfips")
as.numeric("y1_countyfips", na.rm = TRUE)
suppressWarnings(as.numeric("y1_countyfips", na.rm = TRUE))
is.numeric("y1_countyfips")
irsins %>% formatC(y1_statefips, width = 2, format = "d", flag = "0")
is.integer("y1_countyfips")
suppressWarnings(as.integer("y1_countyfips", na.rm = TRUE))
is.integer("y1_countyfips")
irsins %>% formatC(y1_statefips, width = 2, format = "d", flag = "0")
as.numeric("y1_countyfips"[!is.na(irsins)])
as.numeric("y1_countyfips")
as.numeric("y1_countyfips") %>% print(
)
outs <- read_excel("~/Desktop/elliesacbeeR/data/outs.xlsx", sheet=1)
irsouts <- read.csv("~/Desktop/elliesacbeeR/data/countyoutflow2021.csv")
irsins <- read.csv("~/Desktop/elliesacbeeR/data/countyinflow2021.csv")
state2state <- read_excel("~/Desktop/elliesacbeeR/data/2021ca (1).xlsx")
latlongs <- read_csv("https://gist.github.com/russellsamora/12be4f9f574e92413ea3f92ce1bc58e6/raw/3f18230058afd7431a5d394dab7eeb0aafd29d81/us_county_latlng.csv")
irsins %>% formatC(y1_statefips, width = 2, format = "d", flag = "0")
typeof("y1_countyfips")
irsins %>% formatC(y1_statefips, width = 2, format = "d", flag = "0")
as.numeric("y1countyfips"
as.numeric("y1countyfips")
irsins1 <- as.numeric(as.factor("y1_countyfips"))
str(irsins)
irsins %>% formatC(y1_statefips, width = 2, format = "d", flag = "0")
str(irsins)
irsins$y1_countyfips(as.numeric(as.factor("y1_countyfips")))
irsins$y1_countyfips(as.numeric(as.factor("y1_countyfips"))
irsins %>% formatC(y1_statefips, width = 2, format = "d", flag = "0")
str(irsins)
irsins %>% formatC(y1_statefips, width = 2, format = "d", flag = "0")
irsins %>% str_pad(y1_countyfips, 3, pad = 0)
irsins1 <- irsins %>% str_pad(y1_countyfips, 3, pad = 0)
str_pad(irsins$y1_countyfips, 3, pad = 0)
irsins<- str_pad(irsins$y1_countyfips, 3, pad = 0)
irsins<- str_pad(irsins$y1_countyfips, 3, pad = 0)
irsins <- str_pad(irsins$y1_countyfips, 3, pad = 0)
str_pad(irsins$y1_countyfips, 3, pad = 0)
str_pad(irsins$y1_countyfips, 3, pad = 0)
outs <- read_excel("~/Desktop/elliesacbeeR/data/outs.xlsx", sheet=1)
irsouts <- read.csv("~/Desktop/elliesacbeeR/data/countyoutflow2021.csv")
irsins <- read.csv("~/Desktop/elliesacbeeR/data/countyinflow2021.csv")
state2state <- read_excel("~/Desktop/elliesacbeeR/data/2021ca (1).xlsx")
latlongs <- read_csv("https://gist.github.com/russellsamora/12be4f9f574e92413ea3f92ce1bc58e6/raw/3f18230058afd7431a5d394dab7eeb0aafd29d81/us_county_latlng.csv")
View(irsins)
irsins$y1_countyfips <- str_pad(irsins$y1_countyfips, 3, pad = 0)
irsins$y1_statefips <- str_pad(irsins$y1_statefips, 2, pad = 0)
irsins <- irsins %>% unite("fullfips", y1_statefips:y1_countyfips)
irsins <- irsins %>% unite("fullfips", y1_statefips:y1_countyfips, remove = FALSE)
outs <- read_excel("~/Desktop/elliesacbeeR/data/outs.xlsx", sheet=1)
irsouts <- read.csv("~/Desktop/elliesacbeeR/data/countyoutflow2021.csv")
irsins <- read.csv("~/Desktop/elliesacbeeR/data/countyinflow2021.csv")
state2state <- read_excel("~/Desktop/elliesacbeeR/data/2021ca (1).xlsx")
latlongs <- read_csv("https://gist.github.com/russellsamora/12be4f9f574e92413ea3f92ce1bc58e6/raw/3f18230058afd7431a5d394dab7eeb0aafd29d81/us_county_latlng.csv")
irsins$y1_countyfips <- str_pad(irsins$y1_countyfips, 3, pad = 0)
irsins$y1_statefips <- str_pad(irsins$y1_statefips, 2, pad = 0)
irsins <- irsins %>% unite("fullfips")
outs <- read_excel("~/Desktop/elliesacbeeR/data/outs.xlsx", sheet=1)
irsouts <- read.csv("~/Desktop/elliesacbeeR/data/countyoutflow2021.csv")
irsins <- read.csv("~/Desktop/elliesacbeeR/data/countyinflow2021.csv")
state2state <- read_excel("~/Desktop/elliesacbeeR/data/2021ca (1).xlsx")
latlongs <- read_csv("https://gist.github.com/russellsamora/12be4f9f574e92413ea3f92ce1bc58e6/raw/3f18230058afd7431a5d394dab7eeb0aafd29d81/us_county_latlng.csv")
irsins$y1_countyfips <- str_pad(irsins$y1_countyfips, 3, pad = 0)
irsins$y1_statefips <- str_pad(irsins$y1_statefips, 2, pad = 0)
irsins1 <- irsins %>% unite("fullfips", y1_statefips:y1_countyfips, remove = FALSE)
View(irsins1)
irsins %>% mutate(fullfips = str_c(y1_statefips, y1_countyfips))
View(irsins)
irsins %>% mutate(fullfips = str_c(y1_statefips, y1_countyfips))
irsins <- irsins %>% mutate(fullfips = str_c(y1_statefips, y1_countyfips))
View(irsins)
irsins <- irsins %>% mutate(state1fullfips = str_c(y1_statefips, y1_countyfips))
irsouts$y1_statefips <- str_pad(irsins$y1_countyfips, 3, pad = 0)
irsouts$y1_statefips <- str_pad(irsouts$y1_countyfips, 3, pad = 0)
irsouts$y1_statefips <- str_pad(irsouts$y1_statefips, 2, pad = 0)
irsouts <- irsouts %>% mutate(state1fullfips = str_c(y1_statefips,y1_countyfips))
irsins$y1_countyfips <- str_pad(irsins$y1_countyfips, 3, pad = 0)
irsins$y1_statefips <- str_pad(irsins$y1_statefips, 2, pad = 0)
irsins$y2_countyfips <- str_pad(irsins$y2_countyfips, 3, pad = 0)
irsins$y2_statefips <- str_pad(irsins$y2_statefips, 2, pad = 0)
irsins <- irsins %>% mutate(state1fullfips = str_c(y1_statefips, y1_countyfips))
irsins$y1_countyfips <- str_pad(irsins$y1_countyfips, 3, pad = 0)
irsins$y1_statefips <- str_pad(irsins$y1_statefips, 2, pad = 0)
irsins$y2_countyfips <- str_pad(irsins$y2_countyfips, 3, pad = 0)
irsins$y2_statefips <- str_pad(irsins$y2_statefips, 2, pad = 0)
irsins <- irsins %>% mutate(state1fullfips = str_c(y1_statefips, y1_countyfips))
irsins <- irsins %>% mutate(state2fullfips = str_c(y2_statefips, y2_countyfips))
irsins$y1_countyfips <- str_pad(irsins$y1_countyfips, 3, pad = 0)
irsins$y1_statefips <- str_pad(irsins$y1_statefips, 2, pad = 0)
irsins$y2_countyfips <- str_pad(irsins$y2_countyfips, 3, pad = 0)
irsins$y2_statefips <- str_pad(irsins$y2_statefips, 2, pad = 0)
irsins <- irsins %>% mutate(state1fullfips = str_c(y1_statefips, y1_countyfips))
irsins <- irsins %>% mutate(state2fullfips = str_c(y2_statefips, y2_countyfips))
irsouts$y1_statefips <- str_pad(irsouts$y1_countyfips, 3, pad = 0)
irsouts$y1_statefips <- str_pad(irsouts$y1_statefips, 2, pad = 0)
irsouts$y2_countyfips <- str_pad(irsouts$y2_countyfips, 3, pad = 0)
irsouts$y2_statefips <- str_pad(irsouts$y2_statefips, 2, pad = 0)
irsouts <- irsotus %>% mutate(state1fullfips = str_c(y1_statefips, y1_countyfips))
irsouts$y1_statefips <- str_pad(irsouts$y1_countyfips, 3, pad = 0)
irsouts$y1_statefips <- str_pad(irsouts$y1_statefips, 2, pad = 0)
irsouts$y2_countyfips <- str_pad(irsouts$y2_countyfips, 3, pad = 0)
irsouts$y2_statefips <- str_pad(irsouts$y2_statefips, 2, pad = 0)
irsouts <- irsotus %>% mutate(state1fullfips = str_c(y1_statefips, y1_countyfips))
outs <- read_excel("~/Desktop/elliesacbeeR/data/outs.xlsx", sheet=1)
irsouts <- read.csv("~/Desktop/elliesacbeeR/data/countyoutflow2021.csv")
irsins <- read.csv("~/Desktop/elliesacbeeR/data/countyinflow2021.csv")
state2state <- read_excel("~/Desktop/elliesacbeeR/data/2021ca (1).xlsx")
latlongs <- read_csv("https://gist.github.com/russellsamora/12be4f9f574e92413ea3f92ce1bc58e6/raw/3f18230058afd7431a5d394dab7eeb0aafd29d81/us_county_latlng.csv")
irsins$y1_countyfips <- str_pad(irsins$y1_countyfips, 3, pad = 0)
irsins$y1_statefips <- str_pad(irsins$y1_statefips, 2, pad = 0)
irsins$y2_countyfips <- str_pad(irsins$y2_countyfips, 3, pad = 0)
irsins$y2_statefips <- str_pad(irsins$y2_statefips, 2, pad = 0)
irsins <- irsins %>% mutate(state1fullfips = str_c(y1_statefips, y1_countyfips))
irsins <- irsins %>% mutate(state2fullfips = str_c(y2_statefips, y2_countyfips))
irsouts$y1_statefips <- str_pad(irsouts$y1_countyfips, 3, pad = 0)
irsouts$y1_statefips <- str_pad(irsouts$y1_statefips, 2, pad = 0)
irsouts$y2_countyfips <- str_pad(irsouts$y2_countyfips, 3, pad = 0)
irsouts$y2_statefips <- str_pad(irsouts$y2_statefips, 2, pad = 0)
irsouts <- irsotus %>% mutate(state1fullfips = str_c(y1_statefips, y1_countyfips))
View(irsouts)
outs <- read_excel("~/Desktop/elliesacbeeR/data/outs.xlsx", sheet=1)
irsouts <- read.csv("~/Desktop/elliesacbeeR/data/countyoutflow2021.csv")
irsins <- read.csv("~/Desktop/elliesacbeeR/data/countyinflow2021.csv")
state2state <- read_excel("~/Desktop/elliesacbeeR/data/2021ca (1).xlsx")
latlongs <- read_csv("https://gist.github.com/russellsamora/12be4f9f574e92413ea3f92ce1bc58e6/raw/3f18230058afd7431a5d394dab7eeb0aafd29d81/us_county_latlng.csv")
irsins$y1_countyfips <- str_pad(irsins$y1_countyfips, 3, pad = 0)
irsins$y1_statefips <- str_pad(irsins$y1_statefips, 2, pad = 0)
irsins$y2_countyfips <- str_pad(irsins$y2_countyfips, 3, pad = 0)
irsins$y2_statefips <- str_pad(irsins$y2_statefips, 2, pad = 0)
irsins <- irsins %>% mutate(state1fullfips = str_c(y1_statefips, y1_countyfips))
irsins <- irsins %>% mutate(state2fullfips = str_c(y2_statefips, y2_countyfips))
irsouts$y1_countyfips <- str_pad(irsouts$y1_countyfips, 3, pad = 0)
irsouts$y1_statefips <- str_pad(irsouts$y1_statefips, 2, pad = 0)
irsouts$y2_countyfips <- str_pad(irsouts$y2_countyfips, 3, pad = 0)
irsouts$y2_statefips <- str_pad(irsouts$y2_statefips, 2, pad = 0)
irsouts <- irsotus %>% mutate(state1fullfips = str_c(y1_statefips, y1_countyfips))
irsouts <- irsotus %>% mutate(state1fullfips = str_c(y1_statefips, y1_countyfips))
irsouts <- irsouts %>% mutate(state2fullfips = str_c(y2_statefips, y2_countyfips))
irsouts <- irsotus %>% mutate(state1fullfips = str_c(y1_statefips, y1_countyfips))
itsouts %>% mutate(state1fullfips = str_c(y1_statefips, y1_countyfips))
irsouts %>% mutate(state1fullfips = str_c(y1_statefips, y1_countyfips))
irsouts <- irsouts %>% mutate(state1fullfips = str_c(y1_statefips, y1_countyfips))
justca <- irsouts %>% filter("y1_statefips" == "06")
View(justca)
justca <- irsouts %>% filter("y1_statefips" == 06)
View(justca)
justca <- irsouts %>% filter(y1_statefips == 06)
View(justca)
irsouts %>% filter(y1_statefips == 06)
irsouts %>% group_by(y2_countyname) %>% filter(y1_statefips == 06)
irsouts %>% group_by(y2_countyname) %>% filter(y1_statefips == "06")
justca <- irsouts %>% group_by(y2_countyname) %>% filter(y1_statefips == "06")
View(justca)
justcawithlatlong <- merge(justca, latlongs, by.x = "state2fullfips", by.y = "fips_code")
View(justcawithlatlong)
write.csv(justcawithlatlong, "californiaoutmigration.csv")
hc2021 <- read_csv("~/Desktop/elliesacbeeR/data/Hate-2001-2021.csv")
hcp2021 <- read_csv("~/Desktop/elliesacbeeR/data/Hate-Prosecution-survey-2004-2021.csv")
agencyname <- read_xlsx("~/Desktop/elliesacbeeR/data/Agency Code Jurisdiction List_07072022.xlsx")
hc2022 <- read_csv("~/Desktop/elliesacbeeR/data/Hate-2001-2022f.csv")
hcp2022 <- read_csv("~/Desktop/elliesacbeeR/data/Hate Crime Prosecution Survey 2004-2022_Final.csv")
antiaasianstatewide <- hc2022 %>% group_by(ClosedYear) %>%filter(MostSeriousBias == "Anti-Asian") %>% summarise(anti_asian = sum(TotalNumberOfVictims))
View(antiaasianstatewide)
antiaasianstatewide <- hc2022 %>% group_by(ClosedYear) %>%filter(MostSeriousBias == "Anti-Asian") %>% summarise(anti_asian = count(TotalNumberOfVictims))
hc2022 %>% group_by(ClosedYear) %>% filter(MostSeriousBias == "Anti-Asian") %>% count()
View(hc2022)
hc2022 %>% group_by(ClosedYear) %>% filter(MostSeriousBias == "Anti-Asian") %>% count(n)
hc2022 %>% group_by(ClosedYear) %>% filter(MostSeriousBias == "Anti-Asian") %>% summarise( n = n())
write.csv(justca, "californiaoutmigrationnolatlong.csv")
library(tidyverse)
library(readxl)
library(tigris)
outs <- read_excel("~/Desktop/elliesacbeeR/data/outs.xlsx", sheet=1)
irsouts <- read.csv("~/Desktop/elliesacbeeR/data/countyoutflow2021.csv")
irsins <- read.csv("~/Desktop/elliesacbeeR/data/countyinflow2021.csv")
state2state <- read_excel("~/Desktop/elliesacbeeR/data/2021ca (1).xlsx")
latlongs <- read_csv("https://gist.github.com/russellsamora/12be4f9f574e92413ea3f92ce1bc58e6/raw/3f18230058afd7431a5d394dab7eeb0aafd29d81/us_county_latlng.csv")
nosummaryrows <-irsouts %>% group_by(y2_countyname) %>% filter(y1_statefips == "6" & y2_statefips !=96 & y2_statefips !=97 & y2_statefips !=98)
nosummaryrows %>% filter(y1_countyfips == 34 | y1_countyfips == 31 | y1_countyfips == 9 | y1_countyfips == 57)
irsins$y1_countyfips <- str_pad(irsins$y1_countyfips, 3, pad = 0)
irsins$y1_statefips <- str_pad(irsins$y1_statefips, 2, pad = 0)
irsins$y2_countyfips <- str_pad(irsins$y2_countyfips, 3, pad = 0)
irsins$y2_statefips <- str_pad(irsins$y2_statefips, 2, pad = 0)
irsins <- irsins %>% mutate(state1fullfips = str_c(y1_statefips, y1_countyfips))
irsins <- irsins %>% mutate(state2fullfips = str_c(y2_statefips, y2_countyfips))
irsouts$y1_countyfips <- str_pad(irsouts$y1_countyfips, 3, pad = 0)
irsouts$y1_statefips <- str_pad(irsouts$y1_statefips, 2, pad = 0)
irsouts$y2_countyfips <- str_pad(irsouts$y2_countyfips, 3, pad = 0)
irsouts$y2_statefips <- str_pad(irsouts$y2_statefips, 2, pad = 0)
irsouts <- irsouts %>% mutate(state1fullfips = str_c(y1_statefips, y1_countyfips))
irsouts <- irsouts %>% mutate(state2fullfips = str_c(y2_statefips, y2_countyfips))
justca <- irsouts %>% group_by(y2_countyname) %>% filter(y1_statefips == "06")
```{r}
write.csv(justca, "californiaoutmigrationnolatlong.csv")
justca <- justca %>% group_by(y2_countyname) %>% filter(y1_statefips == "6" & y2_statefips !=96 & y2_statefips !=97 & y2_statefips !=98)
View(justca)
justca <- justca %>% group_by(y2_countyname) %>% filter(y1_statefips == "06" & y2_statefips !=96 & y2_statefips !=97 & y2_statefips !=98)
justca <- irsouts %>% group_by(y2_countyname) %>% filter(y1_statefips == "06")
justca %>% filter(y2_statefips !=96 & y2_statefips !=97 & y2_statefips !=98))
justca %>% filter(y2_statefips !=96 & y2_statefips !=97 & y2_statefips !=98)
justca <- justca %>% filter(y2_statefips !=96 & y2_statefips !=97 & y2_statefips !=98)
View(justca)
write.csv(justca, "californiaoutmigrationnolatlong.csv")
merged <- read_csv("~/Desktop/elliesacbeeR/data/merge__california__georef-uni.csv"")
merged <- read_csv("~/Desktop/elliesacbeeR/data/merge__california__georef-uni.csv")
mergeddata <- read_csv("~/Desktop/elliesacbeeR/data/merge__california__georef-uni.csv")
View(mergeddata)
mergeddata <- na.omit(mergeddata)
mergeddata <- mergeddata[complete.cases(mergeddata), ]
justca <- justca[complete.cases(justca), ]
write.csv(justca, "californiaoutmigrationnolatlong.csv")
justca <- justca[complete.cases(justca), ]
mergeddata <- mergeddata[complete.cases(mergeddata), ]
write.csv(mergeddata, "mergeddata.csv")
justca <- group_by(y2_county) %>% summarise(sum(n2))
justca %>%  group_by(y2_countyname) %>% summarise(sum(n2))
justca %>%  group_by(y2_countyname, state2fullfips) %>% summarise(sum(n2))
supersimplified <- justca %>%  group_by(y2_countyname, state2fullfips) %>% summarise(sum(n2))
supersimplified <- justca %>%  group_by(y2_countyname, state2fullfips) %>% summarise(sum(n2))
supersimplified <- justca %>%  group_by(y2_countyname, state2fullfips) %>% summarise(sum(n2))
View(supersimplified)
write.csv(supersimplified, "supersimplified.csv")
library(rvest)
library(tidyverse)
url <- https://www.texastribune.org/search/?q=lubbock#gsc.tab=0&gsc.q=lubbock&gsc.page=1
url <- https://www.texastribune.org/search/?q=lubbock#gsc.tab=0&gsc.q=lubbock&gsc.page=
url <- "https://www.texastribune.org/search/?q=lubbock#gsc.tab=0&gsc.q=lubbock&gsc.page=1"
url <- "https://www.dol.gov/agencies/whd/state/minimum-wage/tipped"
html <- read_html(url)
table1 <- html %>% html_element("table") %>% html_table() %>% clean_names
library(tidyverse)
library(rvest)
library(janitor)
url <- "https://www.dol.gov/agencies/whd/state/minimum-wage/tipped"
html <- read_html(url)
table1 <- html %>% html_element("table") %>% html_table() %>% clean_names
View(table1)
library(tidyverse)
library(rvest)
library(janitor)
url <- "https://www.como.gov/CMS/911dispatch/police.php"
html <- read_html(url)
html %>% html_element("table") %>% html_table() %>% clean_names()
url2 <- "https://www.como.gov/CMS/911dispatch/police.php?Start_Date=2022-11-12&End_Date=2022-11-13&Sumbit=Filter&offset="
html2 <- read_html(url2)
html2 %>% html_element("table") %>% html_table() %>% clean_names()
### Loop
offsets <- seq(from=0, to=375, by=25)
for (o in offsets){
url3 <- paste0(url2,o)
print(url3)
}
### above ^ checking to make sure the URL offset changes approproiately
master_data <- NULL
### made a subset so it'd only scrape the first two pages below
for (o in offsets[1:2]){
url3 <- paste0(url2,o)
html3 <- read_html(url3)
tbl3 <- html3 %>% html_element("table") %>% html_table() %>% clean_names()
master_data <- rbind(master_data, tbl3)
}
### made a new loop with a caveat so it'll grab records every one second
for (o in offsets){
url3 <- paste0(url2,o)
html3 <- read_html(url3)
tbl3 <- html3 %>% html_element("table") %>% html_table() %>% clean_names()
master_data <- rbind(master_data, tbl3)
Sys.sleep(1)
}
url <- "https://www.como.gov/CMS/911dispatch/police.php"
html <- read_html(url)
html %>% html_element("table") %>% html_table() %>% clean_names()
url <- "https://www.texastribune.org/search/?q=lubbock#gsc.tab=0&gsc.q=lubbock&gsc.page=1"
read_html(url)
initialsearch <- read_html(url)
url <- "https://www.texastribune.org/search/?q=lubbock#gsc.tab=0&gsc.q=lubbock&gsc.page=1"
url <- "https://www.texastribune.org/search/?q=lubbock#gsc.tab=0&gsc.q=lubbock&gsc.page=1"
initialsearch <- read_html(url)
url <- "https://www.texastribune.org/search/?q=lubbock#gsc.tab=0&gsc.q=lubbock&gsc.page=1"
initialsearch <- read_html(url)
View(initialsearch)
library(tidyverse)
library(readxl)
library(tigris)
outs <- read_excel("~/Desktop/elliesacbeeR/data/outs.xlsx", sheet=1)
irsouts <- read.csv("~/Desktop/elliesacbeeR/data/countyoutflow2021.csv")
irsins <- read.csv("~/Desktop/elliesacbeeR/data/countyinflow2021.csv")
state2state <- read_excel("~/Desktop/elliesacbeeR/data/2021ca (1).xlsx")
latlongs <- read_csv("https://gist.github.com/russellsamora/12be4f9f574e92413ea3f92ce1bc58e6/raw/3f18230058afd7431a5d394dab7eeb0aafd29d81/us_county_latlng.csv")
nosummaryrows <-irsouts %>% group_by(y2_countyname) %>% filter(y1_statefips == "6" & y2_statefips !=96 & y2_statefips !=97 & y2_statefips !=98)
nosummaryrows %>% filter(y1_countyfips == 34 | y1_countyfips == 31 | y1_countyfips == 9 | y1_countyfips == 57)
mergeddata <- read_csv("~/Desktop/elliesacbeeR/data/merge__california__georef-uni.csv")
irsins$y1_countyfips <- str_pad(irsins$y1_countyfips, 3, pad = 0)
irsins$y1_statefips <- str_pad(irsins$y1_statefips, 2, pad = 0)
irsins$y2_countyfips <- str_pad(irsins$y2_countyfips, 3, pad = 0)
irsins$y2_statefips <- str_pad(irsins$y2_statefips, 2, pad = 0)
irsins <- irsins %>% mutate(state1fullfips = str_c(y1_statefips, y1_countyfips))
irsins <- irsins %>% mutate(state2fullfips = str_c(y2_statefips, y2_countyfips))
irsouts$y1_countyfips <- str_pad(irsouts$y1_countyfips, 3, pad = 0)
irsouts$y1_statefips <- str_pad(irsouts$y1_statefips, 2, pad = 0)
irsouts$y2_countyfips <- str_pad(irsouts$y2_countyfips, 3, pad = 0)
irsouts$y2_statefips <- str_pad(irsouts$y2_statefips, 2, pad = 0)
irsouts <- irsouts %>% mutate(state1fullfips = str_c(y1_statefips, y1_countyfips))
irsouts <- irsouts %>% mutate(state2fullfips = str_c(y2_statefips, y2_countyfips))
View(irsins)
library(tidyverse)
encounters <- read_csv("~/Desktop/elliesacbeeR/data/nationwide-encounters-fy20-fy23-may.csv")
View(encounters)
library(sf)
st_read(system.file("shape/nc.shp"))
nc <- st_read(system.file("shape/nc.shp"))
nc <- st_read(system.file("/Users/elin/Downloads/cb_2018_us_county_500k"))
us <- st_read("/Users/elin/Downloads/cb_2018_us_county_500k")
View(us)
library(tidyverse)
library(readxl)
library(tigris)
outs <- read_excel("~/Desktop/elliesacbeeR/data/outs.xlsx", sheet=1)
irsouts <- read.csv("~/Desktop/elliesacbeeR/data/countyoutflow2021.csv")
irsins <- read.csv("~/Desktop/elliesacbeeR/data/countyinflow2021.csv")
state2state <- read_excel("~/Desktop/elliesacbeeR/data/2021ca (1).xlsx")
latlongs <- read_csv("https://gist.github.com/russellsamora/12be4f9f574e92413ea3f92ce1bc58e6/raw/3f18230058afd7431a5d394dab7eeb0aafd29d81/us_county_latlng.csv")
nosummaryrows <-irsouts %>% group_by(y2_countyname) %>% filter(y1_statefips == "6" & y2_statefips !=96 & y2_statefips !=97 & y2_statefips !=98)
nosummaryrows %>% filter(y1_countyfips == 34 | y1_countyfips == 31 | y1_countyfips == 9 | y1_countyfips == 57)
irsins$y1_countyfips <- str_pad(irsins$y1_countyfips, 3, pad = 0)
irsins$y1_statefips <- str_pad(irsins$y1_statefips, 2, pad = 0)
irsins$y2_countyfips <- str_pad(irsins$y2_countyfips, 3, pad = 0)
irsins$y2_statefips <- str_pad(irsins$y2_statefips, 2, pad = 0)
irsins <- irsins %>% mutate(state1fullfips = str_c(y1_statefips, y1_countyfips))
irsins <- irsins %>% mutate(state2fullfips = str_c(y2_statefips, y2_countyfips))
irsouts$y1_countyfips <- str_pad(irsouts$y1_countyfips, 3, pad = 0)
irsouts$y1_statefips <- str_pad(irsouts$y1_statefips, 2, pad = 0)
irsouts$y2_countyfips <- str_pad(irsouts$y2_countyfips, 3, pad = 0)
irsouts$y2_statefips <- str_pad(irsouts$y2_statefips, 2, pad = 0)
irsouts <- irsouts %>% mutate(state1fullfips = str_c(y1_statefips, y1_countyfips))
irsouts <- irsouts %>% mutate(state2fullfips = str_c(y2_statefips, y2_countyfips))
View(irsouts)
outs <- read_excel("~/Desktop/elliesacbeeR/data/outs.xlsx", sheet=1)
irsouts <- read.csv("~/Desktop/elliesacbeeR/data/countyoutflow2021.csv")
irsins <- read.csv("~/Desktop/elliesacbeeR/data/countyinflow2021.csv")
state2state <- read_excel("~/Desktop/elliesacbeeR/data/2021ca (1).xlsx")
latlongs <- read_csv("https://gist.github.com/russellsamora/12be4f9f574e92413ea3f92ce1bc58e6/raw/3f18230058afd7431a5d394dab7eeb0aafd29d81/us_county_latlng.csv")
View(irsouts)
irsouts$y2_countyfips <- str_pad(irsouts$y2_countyfips, 2, pad = 0)
uswithdata <- merge(isouts, us, by.x="y2_countyfips", by.y="COUNTYFP")
uswithdata <- merge(irsouts, us, by.x="y2_countyfips", by.y="COUNTYFP")
View(uswithdata)
outs <- read_excel("~/Desktop/elliesacbeeR/data/outs.xlsx", sheet=1)
irsouts <- read.csv("~/Desktop/elliesacbeeR/data/countyoutflow2021.csv")
irsins <- read.csv("~/Desktop/elliesacbeeR/data/countyinflow2021.csv")
state2state <- read_excel("~/Desktop/elliesacbeeR/data/2021ca (1).xlsx")
latlongs <- read_csv("https://gist.github.com/russellsamora/12be4f9f574e92413ea3f92ce1bc58e6/raw/3f18230058afd7431a5d394dab7eeb0aafd29d81/us_county_latlng.csv")
View(irsouts)
us <- st_read("/Users/elin/Downloads/cb_2018_us_county_500k")
uswithdata <- merge(irsouts, us, by.x="y2_countyfips", by.y="COUNTYFP")
View(uswithdata)
st_write(uswithdata, "uswithdata.shp")
us <- st_read("/Users/elin/Downloads/cb_2018_us_county_500k")
uswithdata <- merge(irsouts, us, by.x="y2_countyfips", by.y="COUNTYFP")
st_write(uswithdata, "uswithdata.shp")
View(us)
uswithdata <- left_join(irsouts, us, by.x="y2_countyfips", by.y="COUNTYFP")
uswithdata <- left_join(irsouts, us, by="y2_countyfips")
uswithdata <- left_join(irsouts, us, by = "y2_countyfips")
uswithdata <- left_join(irsouts, us, by.x = "y2_countyfips")
uswithdata <- left_join(irsouts, us, by.x = "y2_countyfips", by.y = "COUNTYFP")
uswithdata <- join_by(irsouts, us, by.x = "y2_countyfips", by.y = "COUNTYFP")
uswithdata <- join_by(irsouts, us, by.x == "y2_countyfips", by.y == "COUNTYFP")
uswithdata <- join_by(irsouts, us, by.x == "y2_countyfips", by.y == "COUNTYFP")
View(uswithdata)
uswithdata <- join_by(irsouts, us, by.x = "y2_countyfips", by.y = "COUNTYFP")
uswithdata <- merge(irsouts, us, by.x = "y2_countyfips", by.y = "COUNTYFP")
st_write(uswithdata, "uswithdata.shp")
nosummaryrows <-irsouts %>% group_by(y2_countyname) %>% filter(y1_statefips == "6" & y2_statefips !=96 & y2_statefips !=97 & y2_statefips !=98)
View(nosummaryrows)
View(irsouts)
View(irsouts)
irsouts$y1_countyfips <- str_pad(irsouts$y1_countyfips, 3, pad = 0)
irsouts$y1_statefips <- str_pad(irsouts$y1_statefips, 2, pad = 0)
irsouts$y2_countyfips <- str_pad(irsouts$y2_countyfips, 3, pad = 0)
irsouts$y2_statefips <- str_pad(irsouts$y2_statefips, 2, pad = 0)
irsouts <- irsouts %>% mutate(state1fullfips = str_c(y1_statefips, y1_countyfips))
irsouts <- irsouts %>% mutate(state2fullfips = str_c(y2_statefips, y2_countyfips))
us <- us %>% mutate(fullfips = str_c(STATEFP, COUNTYFP))
uswithdata <- merge(irsouts, us, by.x = "state2fullfips", by.y = "fullfips")
View(uswithdata)
justca <- irsouts %>% group_by(y2_countyname) %>% filter(y1_statefips == "06")
justca <- justca %>% filter(y2_statefips !=96 & y2_statefips !=97 & y2_statefips !=98)
supersimplified <- justca %>%  group_by(y2_countyname, state2fullfips) %>% summarise(sum(n2))
View(supersimplified)
countyoutflow <- read.csv("~/Desktop/elliesacbeeR/data/countyoutflow2021.csv")
us <- st_read("/Users/elin/Downloads/cb_2018_us_county_500k")
countyoutflow %>% group_by(y2_countyname) %>% filter(y1_statefips == "6" & y2_statefips !=96 & y2_statefips !=97 & y2_statefips !=98)
california <- countyoutflow %>% group_by(y2_countyname) %>% filter(y1_statefips == "6" & y2_statefips !=96 & y2_statefips !=97 & y2_statefips !=98)
View(uswithdata)
View(countyoutflow)
View(california)
california$y2_countyfips <- str_pad(california$y2_countyfips, 3, pad = 0)
california$y2_statefips <- str_pad(california$y2_statefips, 2, pad = 0)
california <- california %>% mutate(state2fullfips = str_c(y2_statefips, y2_countyfips))
california %>% group_by(y2_countyname, state2fullfips) %>% summarise(sum(n2))
california %>% group_by(y2_countyname) %>% filter(y2_countyname == "Hennepin County") %>% summarise(sum(n2))
simplified <- california %>% group_by(y2_countyname, state2fullfips) %>% summarise(sum(n2))
us <- us %>% mutate(fullfips = str_c(STATEFP, COUNTYFP))
View(simplified)
